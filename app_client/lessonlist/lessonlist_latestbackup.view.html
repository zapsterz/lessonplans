
<page-header></page-header>


<div ng-controller="lessonlistCtrl" class="llbg">

	<div class="row" style="margin:0; padding:none;">

		<div ng-repeat="i in vm.alllessons | orderBy: 'topic'">


		
			<div class="col-xs-12" style="border-bottom:4px solid white; padding-bottom: 10px;">
				<div class="col-xs-1 vcentercphb" style="border-right:solid 5px white; background:white; position:absolute; height:100%; opacity:0.8;">
					
					<h1 class="text-center capitalize" style="background:none; color:navy; position:absolute; top: 50%; transform: rotate(-90deg) translateX(50px);width:100px; padding:none; margin:none;">
						{{i.topic}}
					</h1>
					
				</div><!--

				--><div class="col-xs-10 col-xs-offset-1 col-md-3 col-md-offset-1 vcentercpt">
					<a class="col-xs-12" href="/#/showplans/{{i.level}}/{{i.topic}}/{{i._id}}"><h3 style="text-transform: capitalize;">{{i.name}}</h3></a>
					
					<p class="colw col-xs-12">{{ i.description}}</p>
					<p class="colg col-xs-12" ng-if="i.description === ''">No description available</p>
					<p class="colw col-xs-7">Average Rating: </p><p ng-if="i.averagereview === 0" class="colg">No ratings available</p>
					
					<!--
					<p class="colw col-xs-5" >{{i.averagereview | formatavereview}}</p>
					-->
					
					<div ng-if="i.averagereview !== 0">
						<img ng-src="{{i.averagereview | choosestars }}"/>
					</div>

				</div><!--

				--><div id="divonelesson" class="col-xs-10 col-xs-offset-1 col-md-7 col-md-offset-0 vcentercp" >
				
					<script>
var myIframe = document.getElementById('ifonelesson');
myIframe.onload = function () {
    myIframe.contentWindow.scrollTo(0,30);
}
					</script>

					<iframe class="valign" ng-src="{{ '/datastore/' + i.level + '/' + i.topic + '/' + i._id + '.pdf' }}" name="internal" target="internal" seamless='seamless' id="ifonelesson" frameborder="0" hspace="0" vspace="0" marginheight="0" marginwidth="0" width="100" style="margin-top:10px;"></iframe>
					
					<button class="btn btn-primary" style="margin:6px 0px 0px 0px;"><a style="color:white" href="/datastore/{{i.level}}/{{i.topic}}/{{i._id}}.{{i.ext}}" download="{{i.name}}" target="_self">Download Plan</a></button>

				</div>				

				<div class="row text-center">

					<form ng-if="phvm.currentUser.type==1" ng-submit="vm.onSubmit(i.level, i.topic, i._id)" method="post" role="form" class="container-fluid form-horizontal">
						<div>
							<button class="btn btn-primary" type="submit" style="margin:48px 0px 0px 0px;">Delete</button>
						</div>
					</form>

				</div>


				
			</div>

		</div>




		<div ng-repeat="j in vm.alltopics">
			<h1>{{j}}</h1>
			<hr>
			<div ng-repeat="i in filtered = (vm.alllessons | filter: {topic:j})">

		
				<div class="col-xs-12" style="border-bottom:4px solid white; padding-bottom: 10px;">
			<!--
				<div class="col-xs-1 vcentercphb" style="border-right:solid 5px white; background:white; position:absolute; height:100%; opacity:0.8;">
					
					<h1 class="text-center capitalize" style="background:none; color:navy; position:absolute; top: 50%; transform: rotate(-90deg) translateX(50px);width:100px; padding:none; margin:none;">
						{{i.topic}}
					</h1>
					
				</div>--><!--

				--><div class="col-xs-10 col-xs-offset-1 offset-xs-1 col-md-3 col-md-offset-1 vcentercpt">
						<a class="col-xs-12" href="/#/showplans/{{i.level}}/{{i.topic}}/{{i._id}}"><h3 style="text-transform: capitalize;">{{i.name}}</h3></a>
					
						<p class="colw col-xs-12">{{ i.description}}</p>
						<p class="colg col-xs-12" ng-if="i.description === ''">No description available</p>
						<p class="colw col-xs-7">Average Rating: </p><p ng-if="i.averagereview === 0" class="colg">No ratings available</p>
					
					<!--
					<p class="colw col-xs-5" >{{i.averagereview | formatavereview}}</p>
					-->
					
						<div ng-if="i.averagereview !== 0">
							<img ng-src="{{i.averagereview | choosestars }}"/>
						</div>

					</div><!--

				--><div id="divonelesson" class="col-xs-10 col-xs-offset-1 col-md-7 col-md-offset-0 vcentercp" >
				
					<script>
var myIframe = document.getElementById('ifonelesson');
myIframe.onload = function () {
    myIframe.contentWindow.scrollTo(0,30);
}
					</script>


					<iframe class="valign" ng-src="{{ '/datastore/' + i.level + '/' + i.topic + '/' + i._id + '.pdf' }}" name="internal" target="internal" seamless='seamless' id="ifonelesson" frameborder="0" hspace="0" vspace="0" marginheight="0" marginwidth="0" width="100" style="margin-top:10px;"></iframe>
					
<!--
					<iframe class="valign" ng-src="{{ '/datastore/' + i.level + '/' + i.topic + '/' + i._id + '.pdf' }}" name="internal" target="_self" seamless='seamless' id="ifonelesson" frameborder="0" hspace="0" vspace="0" marginheight="0" marginwidth="0" width="100" style="margin-top:10px;"></iframe>
-->					

					<button class="btn btn-primary" style="margin:6px 0px 0px 0px;"><a style="color:white" href="/datastore/{{i.level}}/{{i.topic}}/{{i._id}}.{{i.ext}}" download="{{i.name}}" target="_self">Download Plan</a></button>

				</div>				

				<div class="row text-center">

					<form ng-if="phvm.currentUser.type==1" ng-submit="vm.onSubmit(i.level, i.topic, i._id)" method="post" role="form" class="container-fluid form-horizontal">
						<div>
							<button class="btn btn-primary" type="submit" style="margin:48px 0px 0px 0px;">Delete</button>
						</div>
					</form>

				</div>


				
			</div>


		</div>
		</div>
	</div>
</div>




<page-footer></page-footer>



		
